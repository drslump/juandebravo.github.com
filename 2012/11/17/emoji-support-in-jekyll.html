<!doctype html>
<!--[if lt IE 7]> <html class="no-js ie6 oldie" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <title>Emoji support in jekyll - juandebravo's personal blog</title>
  <meta name="description" content="juandebravo's personal blog - Personal thoughts about technology (@juandebravo)">
  <meta name="author" content="Juan de Bravo">
  <meta name="viewport" content="width=device-width,initial-scale=1">

  <link href="http://feeds.feedburner.com/juandebravo" rel="alternate" title="juandebravo's personal blog" type="application/atom+xml">
  <link rel="author" href="/humans.txt">

  <link rel="stylesheet" href="/css/emoji.css">
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/syntax.css">
  <link rel="stylesheet" href="/css/disqus.css">

  <script src="/js/libs/modernizr-2.0.6.min.js"></script>
</head>

<body>
  <div class='main_container'>
    <div class="title">
      <h1>
        <a href="/index.html">juandebravo's personal blog</a>
      </h1>
    </div>
    <div class="menu">
      <ul>
  
    
    
    <li class="item active">
      <a href="/index.html">Dev Blog</a>
    </li>
  
    
    
    <li class="item ">
      <a href="/open_source.html">Open Source</a>
    </li>
  
    
    
    <li class="item ">
      <a href="/about_me.html">About me</a>
    </li>
  
</ul>
    </div>
    <div class="container">

      <header>
  <h2><a class="fadedlink" href="/" title="Home">&laquo;</a> Emoji support in jekyll <small>17 Nov 2012</small></h2>

  <nav>
    <ul class="clearfix">
    
      <li><a href="/tag/ruby.html">ruby</a></li>
    
      <li><a href="/tag/jekyll.html">jekyll</a></li>
    
    </ul>
  </nav>
</header>

<div id="post" role="main">
  <p>While writing my <a href="/2012/10/28/css-changes/">last post</a> I seeked for information about how to include plugins in Jekyll. <a href="https://github.com/mojombo/jekyll/wiki/Plugins">Jekyll repo wiki</a> describes how easy is to write and hook specific logic to your Jekyll site.</p>

<p>Nonetheless, if you are using Github as hosting to deploy your Jekyll site, you cannot use plugins :worried:.</p>

<h2 id="include-the-gemoji-dependency-in-your-gemfile">1. Include the <strong>gemoji</strong> dependency in your Gemfile</h2>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby">gem &#39;gemoji&#39;, :require =&gt; &#39;emoji/railtie&#39;</code></pre></figure>

<h2 id="add-a-configuration-attribute-in-the-configyml-file">2. Add a configuration attribute in the <strong>_config.yml</strong> file</h2>

<p>This folder will contain the emoji icons.</p>

<figure class="highlight"><pre><code class="language-yaml" data-lang="yaml">emoji:    gfx/emoji</code></pre></figure>

<h2 id="write-a-rake-task-into-the-rakefile">3. Write a rake task into the Rakefile</h2>

<p>This rake task copies the icons included in the gemoji gem into your Jekyll site folder. It also generates a CSS file.</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby">desc &#39;Generate emoji CSS styles&#39;
task :emoji do
  puts green &#39;Generating emoji CSS...&#39;

  require &#39;jekyll&#39;

  site = Jekyll::Site.new(Jekyll.configuration({}))

  path = site.config[&#39;emoji&#39;]

  if !path.empty? and !File.exists?(&quot;#{path}&quot;) and !File.exists?(&quot;#{path}/smiley.png&quot;)
    Dir::mkdir path

    _css = %[.emoji {
  width: 20px;
  display: inline-block;
  text-indent: -2000px;
}

]

    Dir[&quot;#{Emoji.images_path}/emoji/*.png&quot;].each do |src|
      FileUtils.cp src, path
      *_, file = src.split(&quot;/&quot;)
      *emoji_name, _ = file.split(&quot;.&quot;)
      _css += %[.emoji_#{emoji_name.join(&quot;.&quot;)} {
  background:url(&quot;/#{path}/#{file}&quot;) no-repeat scroll 0 center transparent;
  background-size: 20px auto;
}

]
    end

    File.open &quot;css/emoji.css&quot;, &#39;w+&#39; do |file|
      file.write _css
    end
  end
  puts green &#39;Done!&#39;
end</code></pre></figure>

<h2 id="execute-the-rake-task">4. Execute the rake task</h2>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">rake emoji</code></pre></figure>

<p>Now you can check the generated CSS file that defines a specific style per emoji icon and the <strong>png</strong> files (the emoji icons) copied into the configured folder.</p>

<h2 id="include-the-generated-css-file-into-html-layouts">5. Include the generated CSS file into HTML layouts</h2>

<figure class="highlight"><pre><code class="language-html" data-lang="html">&lt;link rel=&quot;stylesheet&quot; href=&quot;/css/style.css&quot;&gt;</code></pre></figure>

<h2 id="write-a-plugin-that-converts-the-emoji-tags-in-html-tags">6. Write a plugin that converts the emoji tags in HTML tags</h2>

<p>Copy this content into the file <strong>_plugins/emoji.rb</strong></p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby">require &quot;gemoji&quot;

module Jekyll
  module EmojiFilter

    def emojify(content)
      if @context.registers[:site].config[&#39;emoji&#39;]
        content.to_str.gsub(/:([a-z0-9\+\-_]+):/) do |match|
          if Emoji.names.include?($1)
            &quot;&lt;span class=&#39;emoji emoji_#{$1}&#39;&gt;#{$1} emoji&lt;/span&gt;&quot;
          else
            match
          end
        end
      else
        content
      end
    end # emojify

  end # EmojiFilter
end # Jekyll

Liquid::Template.register_filter(Jekyll::EmojiFilter)</code></pre></figure>

<h2 id="emojify-your-content">7. Emojify your content!</h2>

<p>Concat the filter <strong>emojify</strong> in the layouts where you want to include emojies.</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html">&lt;div id=&quot;post&quot; role=&quot;main&quot;&gt;
  &lt;header&gt;
  &lt;h2&gt;&lt;a class=&quot;fadedlink&quot; href=&quot;/&quot; title=&quot;Home&quot;&gt;&amp;laquo;&lt;/a&gt; CSS changes &lt;small&gt;28 Oct 2012&lt;/small&gt;&lt;/h2&gt;

  &lt;nav&gt;
    &lt;ul class=&quot;clearfix&quot;&gt;
    
      &lt;li&gt;&lt;a href=&quot;/tag/css.html&quot;&gt;css&lt;/a&gt;&lt;/li&gt;
    
    &lt;/ul&gt;
  &lt;/nav&gt;
&lt;/header&gt;

&lt;div id=&quot;post&quot; role=&quot;main&quot;&gt;
  &lt;p&gt;Today I’ve been changing a bit the CSS that creates the layout of this site. Almost the whole style was defined by my pal &lt;a href=&quot;http://www.twitter.com/rafeca&quot;&gt;@rafeca&lt;/a&gt; while creating &lt;a href=&quot;http://www.rafeca.com&quot;&gt;his blog&lt;/a&gt;. I have borrowed it :smile:.&lt;/p&gt;

&lt;p&gt;Although I am not an expert on CSS, I like hacking a bit of this :squirrel:.&lt;/p&gt;

&lt;p&gt;I summarize the changes in the following sections.&lt;/p&gt;

&lt;h2 id=&quot;bottom-links-showing-a---character&quot;&gt;Bottom links showing a “-“ character&lt;/h2&gt;

&lt;p&gt;I think this is a common issue in a lot of sites: when you define a link containing an image, it may appear an annoying hyphen character on the right side of the image when the cursor is hover it. It’s been happening in this blog on the footer links.&lt;/p&gt;

&lt;p&gt;To change this behavior, remove the &lt;strong&gt;img&lt;/strong&gt; element and define the image as background, ensuring the text inside the &lt;strong&gt;a&lt;/strong&gt; element is indented outside the screen, far away from the visible divs.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;&amp;lt;footer&amp;gt;
      &amp;lt;!-- Before --&amp;gt;
      &amp;lt;a class=&amp;quot;fadedlink&amp;quot; href=&amp;quot;https://github.com/juandebravo&amp;quot;&amp;gt;
        &amp;lt;img src=&amp;quot;/gfx/github-logo.png&amp;quot; alt=&amp;quot;@github&amp;quot;&amp;gt;
      &amp;lt;/a&amp;gt;
      &amp;lt;!-- Now --&amp;gt;
      &amp;lt;a class=&amp;quot;fadedlink footer_link github&amp;quot; href=&amp;quot;https://github.com/juandebravo&amp;quot;&amp;gt;
        @github
      &amp;lt;/a&amp;gt;
    &amp;lt;/footer&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-css&quot; data-lang=&quot;css&quot;&gt;.footer_link {
  width: 25px;
  display: inline-block;
  text-indent: -1000px;
}

.github {
  background: url(&amp;quot;/gfx/github-logo.png&amp;quot;) no-repeat scroll 0 transparent;
}&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h2 id=&quot;increase-body-font-size&quot;&gt;Increase body font size&lt;/h2&gt;
&lt;p&gt;This one is the easiest :sweat_smile:.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-css&quot; data-lang=&quot;css&quot;&gt;body {
  margin: 0;
  line-height: 1.4;
  /* Before */
  font-size: 16px;
  /* Now */
  font-size: 18px;
}&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h2 id=&quot;list-style-type&quot;&gt;List style type&lt;/h2&gt;

&lt;p&gt;In both the &lt;a href=&quot;/index.html&quot;&gt;main&lt;/a&gt; and the &lt;a href=&quot;/open_source.html&quot;&gt;open source&lt;/a&gt; pages, while defining &lt;strong&gt;li&lt;/strong&gt; elements the default circle character was being used. I’ve changed the CSS to support an Unicode code point using the &lt;strong&gt;:before&lt;/strong&gt; clause.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-css&quot; data-lang=&quot;css&quot;&gt;.container ul.posts {
	/* Do not use list decoration */
    list-style: none;
}

.container ul.posts li:before {
	/* Add a before content */
	content: &amp;quot;\0445&amp;quot;;
}&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h2 id=&quot;predefined-width-on-the-left-side-while-indexing-stuff&quot;&gt;Predefined width on the left side while indexing stuff&lt;/h2&gt;

&lt;p&gt;The &lt;a href=&quot;/index.html&quot;&gt;main&lt;/a&gt; page shows a the list of posts titles and their posting date. The content was not aligned:&lt;/p&gt;

&lt;p&gt;Before:&lt;/p&gt;

&lt;li class=&quot;post&quot; style=&quot;list-style-type:none; padding-left: 30px&quot;&gt;
  &lt;span&gt;05 Aug 2012&lt;/span&gt;
  &lt;a title=&quot;Ensuring Array as object type&quot; href=&quot;/2012/08/05/ensuring-array-as-object-type&quot;&gt;Ensuring Array as object type&lt;/a&gt;
&lt;/li&gt;
&lt;li class=&quot;post&quot; style=&quot;list-style-type:none; padding-left: 30px&quot;&gt;
  &lt;span&gt;24 Jul 2012&lt;/span&gt;
  &lt;a title=&quot;Things I like using python (part II)&quot; href=&quot;/2012/07/24/why-python-rocks_and_two&quot;&gt;Things I like using python (part II)&lt;/a&gt;
&lt;/li&gt;

&lt;p&gt;After:&lt;/p&gt;
&lt;li class=&quot;post&quot; style=&quot;list-style-type:none; padding-left: 30px&quot;&gt;
  &lt;span class=&quot;left_title&quot;&gt;05 Aug 2012&lt;/span&gt;
  &lt;a title=&quot;Ensuring Array as object type&quot; href=&quot;/2012/08/05/ensuring-array-as-object-type&quot;&gt;Ensuring Array as object type&lt;/a&gt;
&lt;/li&gt;
&lt;li class=&quot;post&quot; style=&quot;list-style-type:none; padding-left: 30px&quot;&gt;
  &lt;span class=&quot;left_title&quot;&gt;24 Jul 2012&lt;/span&gt;
  &lt;a title=&quot;Things I like using python (part II)&quot; href=&quot;/2012/07/24/why-python-rocks_and_two&quot;&gt;Things I like using python (part II)&lt;/a&gt;
&lt;/li&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-css&quot; data-lang=&quot;css&quot;&gt;.left_title {
  display: inline-block;
  min-width: 110px;
}&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;



  &lt;p class=&quot;back&quot;&gt;&amp;laquo; &lt;a href=&quot;/&quot;&gt;Home&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;!--h2&gt;Related Posts&lt;/h2&gt;
&lt;ul class=&quot;posts_list&quot;&gt;
  
    &lt;li class=&quot;post&quot;&gt;
  &lt;span class=&quot;left_title&quot;&gt;22 Jan 2017&lt;/span&gt;
  &lt;a href=&quot;/2017/01/22/docker-insecure-registry&quot; title=&quot;Docker and how to get access to insecure registries&quot;&gt;Docker and how to get access to insecure registries&lt;/a&gt;
&lt;/li&gt;
  
    &lt;li class=&quot;post&quot;&gt;
  &lt;span class=&quot;left_title&quot;&gt;23 Nov 2015&lt;/span&gt;
  &lt;a href=&quot;/2015/11/23/webrtc-adapter-vagrant-box&quot; title=&quot;A virtual machine for WebRTC development&quot;&gt;A virtual machine for WebRTC development&lt;/a&gt;
&lt;/li&gt;
  
    &lt;li class=&quot;post&quot;&gt;
  &lt;span class=&quot;left_title&quot;&gt;06 Jul 2015&lt;/span&gt;
  &lt;a href=&quot;/2015/07/06/demystifying-coroutines-in-python&quot; title=&quot;Demystifying coroutines in python&quot;&gt;Demystifying coroutines in python&lt;/a&gt;
&lt;/li&gt;
  
&lt;/ul--&gt;

&lt;hr/&gt;

&lt;h2&gt;Comments&lt;/h2&gt;
&lt;div id=&quot;disqus_thread&quot;&gt;&lt;/div&gt;
&lt;script type=&quot;text/javascript&quot;&gt;
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = &#39;juandebravo&#39;; // required: replace example with your forum shortname
    //var disqus_developer = 1; // developer mode is on, for testing locally

    /* * * DON&#39;T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement(&#39;script&#39;); dsq.type = &#39;text/javascript&#39;; dsq.async = true;
        dsq.src = &#39;http://&#39; + disqus_shortname + &#39;.disqus.com/embed.js&#39;;
        (document.getElementsByTagName(&#39;head&#39;)[0] || document.getElementsByTagName(&#39;body&#39;)[0]).appendChild(dsq);
    })();
&lt;/script&gt;
&lt;noscript&gt;Please enable JavaScript to view the &lt;a href=&quot;http://disqus.com/?ref_noscript&quot;&gt;comments powered by Disqus.&lt;/a&gt;&lt;/noscript&gt;

  
  &lt;p class=&quot;back&quot;&gt;&amp;laquo; &lt;a href=&quot;/&quot;&gt;Home&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;</code></pre></figure>

<h2 id="write-an-emoji-in-a-markdown-file-and-run-the-server">8. Write an emoji in a markdown file and run the server</h2>

<p>For instance to include a smile, write <strong>:smile:</strong></p>

<h2 id="run-jekyll">9. Run jekyll</h2>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">jekyll --server --auto</code></pre></figure>

<h2 id="enjoy">10. Enjoy</h2>

<p>:neckbeard: :squirrel: :bug: :monkey: :scream: :hankey: :smile:</p>


  <p class="back">&laquo; <a href="/">Home</a></p>
</div>

<!--h2>Related Posts</h2>
<ul class="posts_list">
  
    <li class="post">
  <span class="left_title">22 Jan 2017</span>
  <a href="/2017/01/22/docker-insecure-registry" title="Docker and how to get access to insecure registries">Docker and how to get access to insecure registries</a>
</li>
  
    <li class="post">
  <span class="left_title">23 Nov 2015</span>
  <a href="/2015/11/23/webrtc-adapter-vagrant-box" title="A virtual machine for WebRTC development">A virtual machine for WebRTC development</a>
</li>
  
    <li class="post">
  <span class="left_title">06 Jul 2015</span>
  <a href="/2015/07/06/demystifying-coroutines-in-python" title="Demystifying coroutines in python">Demystifying coroutines in python</a>
</li>
  
</ul-->

<hr/>

<h2>Comments</h2>
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'juandebravo'; // required: replace example with your forum shortname
    //var disqus_developer = 1; // developer mode is on, for testing locally

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


      <footer>
        <span class="author_info">
          <a href="/about_me.html">Juan de Bravo</a>
        </span>
        <a class="fadedlink footer_link github" href="https://github.com/juandebravo">
          @github
        </a>
        <a class="fadedlink footer_link twitter" href="https://twitter.com/juandebravo">
          @twitter
        </a>
        <a class="fadedlink footer_link linkedin" href="http://linkedin.com/in/juandebravo">
          @linkedin
        </a>
        <a class="fadedlink" href="mailto:juandebravo@gmail.com">
          <img src="/gfx/gmail-logo.png" alt="@gmail">
        </a>
      </footer>
    </div>
  </div>

  <script>
    window._gaq = [['_setAccount','UA-32824811-1'],['_trackPageview'],['_trackPageLoadTime']];
    Modernizr.load({
      load: ('https:' == location.protocol ? '//ssl' : '//www') + '.google-analytics.com/ga.js'
    });
  </script>

  <!--[if lt IE 7 ]>
    <script src="//ajax.googleapis.com/ajax/libs/chrome-frame/1.0.3/CFInstall.min.js"></script>
    <script>window.attachEvent('onload',function(){CFInstall.check({mode:'overlay'})})</script>
  <![endif]-->
</body>
</html>
